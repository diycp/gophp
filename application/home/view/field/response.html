
{{include_file name='public/header' title='响应参数管理'}}
<style>
    body {
        background-color: #ffffff;
    }

</style>
</head>

<body>

<div class="container">
    <!-- /.row -->
    <div class="row">
        <form id="js_addApiForm" role="form" action="{{url('field/add')}}" method="post">
            <input type="hidden" class="form-control" name="field[id]" value="">
            <input type="hidden" class="form-control" name="field[api_id]" value="{{$api.id}}">
            <input type="hidden" class="form-control" name="field[method]" value="2">
            <input type="hidden" class="form-control" name="field[is_required]" value="0">

            <div class="form-group">
                <label>参数别名</label>
                <input class="form-control" name="field[name]" value="" placeholder="必填，只能是数字和字母组合，且首位不能是数字" datatype="*" nullmsg="请输入接口名称">
            </div>

            <div class="form-group">
                <label>参数含义</label>
                <input class="form-control" name="field[title]" value="" placeholder="必填" datatype="*" nullmsg="请输入接口名称">
            </div>

            <div class="form-group">
                <label>参数类型</label>
                <select class="form-control" name="field[type]">
                    {{foreach \app\field::get_type_list() as $k => $type}}
                    <option value="{{$k}}">{{$type}}</option>
                    {{/foreach}}
                </select>
            </div>

            <div class="form-group">
                <label>备注说明</label>
                <textarea class="form-control" name="field[intro]" rows="2" placeholder="非必填"></textarea>
                <span class="Validform_checktip"></span>
            </div>

            <input type="hidden" id="js_submit" value="提交">

        </form>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</div>
<!-- /#wrapper -->

<script>

    $(function(){

        //验证表单
        $("#js_addApiForm").validateForm({
            submitBtn: '#js_submit',
            before:function () {
                // iframe父级提交按钮禁用
                $('#js_addApiForm', parent.document).find(".js_submit").attr("disabled", "disabled").text('提交中..');
            },
            success:function () {
                parent.location.reload();
//                parent.$('#js_addApiModal').modal('hide');

            },
            error:function () {
                // iframe父级提交按钮激活
                $('#js_addApiForm', parent.document).find(".js_submit").text('重新提交').removeAttr("disabled");

            }
        });

    });


</script>

{{include_file name='public/footer'}}
