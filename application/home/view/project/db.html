{{include_file name='public/header' title='数据字典'}}
{{$user_id = $project.user_id}}
<style>
    .table-name{
        text-indent: 8px;
        border-left: 2px solid #88B7E0;
    }
</style>
</head>

<body>

<div id="wrapper">

    <!-- Navigation -->
    {{include_file name='public/nav' sidebar='project_sidebar'}}
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <div class="page-header">
                    <h1>数据字典 </h1>
                    <div class="opt-btn">
                        {{if \app\user::is_creater({{$project.id}})}}
                        <a href="javascript:void(0);" class="btn hidden-xs btn-sm btn-success js_editProjectBtn" data-toggle="tooltip" title="编辑项目" data-placement="bottom" data-id="{{$project.id}}">编辑</a>
                        <!--                        <a href="{{url("project/export")}}?id={{$project.id}}" class="btn hidden-xs btn-sm btn-info" data-toggle="tooltip" title="导出JSON" data-placement="bottom">备份</a>-->

                        {{/if}}
                        <a href="{{url("project/export")}}?id={{id_encode($project.id)}}" class="btn hidden-xs btn-sm btn-warning" data-toggle="tooltip" title="导出HTML" data-placement="bottom">导出</a>
                    </div>
                </div>
            </div>
            <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
        <div class="row">

            <div class="col-lg-12">

                <div class="panel panel-default">

                    {{include_file name='project/tab'}}

                    <div class="panel-body">
                        <div class="table-responsive">
                            <p class="table-name">doc_user(会员表)</p>
                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr class="success">
                                    <th>字段</th>
                                    <th>类型</th>
                                    <th>是否为空</th>
                                    <th>是否主键</th>
                                    <th>默认值</th>
                                    <th>备注</th>

                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>int(10)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-key"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>module_id</td>
                                    <td>int(10)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td>模块id</td>

                                </tr>
                                <tr>
                                    <td>title</td>
                                    <td>varchar(250)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>method</td>
                                    <td>int(3)</td>
                                    <td><i class="fa fa-check"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td>3</td>
                                    <td>请求方法，1:get 2:post 3:get/post</td>

                                </tr>
                                <tr>
                                    <td>uri</td>
                                    <td>varchar(250)</td>
                                    <td><i class="fa fa-check"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>intro</td>
                                    <td>varchar(250)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>user_id</td>
                                    <td>int(10)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td>0</td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>add_time</td>
                                    <td>datetime</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>demo</td>
                                    <td>text</td>
                                    <td><i class="fa fa-check"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>


                                </tbody>
                            </table>
                        </div>

                        <div class="table-responsive">
                            <p class="table-name">doc_user(会员表)</p>

                            <table class="table table-striped table-bordered table-hover">
                                <thead>
                                <tr class="success">
                                    <th>字段</th>
                                    <th>类型</th>
                                    <th>是否为空</th>
                                    <th>是否主键</th>
                                    <th>默认值</th>
                                    <th>备注</th>

                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>int(10)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-key"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>module_id</td>
                                    <td>int(10)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td>模块id</td>

                                </tr>
                                <tr>
                                    <td>title</td>
                                    <td>varchar(250)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>method</td>
                                    <td>int(3)</td>
                                    <td><i class="fa fa-check"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td>3</td>
                                    <td>请求方法，1:get 2:post 3:get/post</td>

                                </tr>
                                <tr>
                                    <td>uri</td>
                                    <td>varchar(250)</td>
                                    <td><i class="fa fa-check"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>intro</td>
                                    <td>varchar(250)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>user_id</td>
                                    <td>int(10)</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td>0</td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>add_time</td>
                                    <td>datetime</td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>
                                <tr>
                                    <td>demo</td>
                                    <td>text</td>
                                    <td><i class="fa fa-check"></i></td>
                                    <td><i class="fa fa-times"></i></td>
                                    <td></td>
                                    <td></td>

                                </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- /.panel-body -->
                </div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
        </div>

    </div>
    <!-- /#page-wrapper -->




</div>
<!-- /#wrapper -->

<hr>
<p class="text-center">{{get_config('copyright')}}</p>

<script src="{{STATIC_URL}}/plugins/sortable/sortable.min.js"></script>

<script>
    $(function(){

        //control+se编辑
        document.onkeydown=function()   {
            if (event.ctrlKey == true && event.keyCode == 69) {//Ctrl+S
                event.returnvalue = false;
                $(".js_editProjectBtn").trigger('click');
            }

        };

        //移出项目
        $(".js_quitProjectBtn").click(function(event){
            // 阻止事件冒泡
            event.stopPropagation();

            var thisObj = $(this);

            var projectId = "{{$project.id}}";
            var userId    = thisObj.data('user_id');

            var url = "{{url('project/quit')}}";

            confirm('确认将该成员移出项目?', function(){

                $.post(url, { project_id:projectId,user_id:userId }, function(json){

                    if(json.code == 200){

                        alert(json.msg, 500, function () {
                            thisObj.closest('tr').remove();
                        });

                    }else{

                        alert(json.msg, 2000);

                    }

                }, 'json');
            });

        });

        // 修改项目
        $(document).delegate('.js_editProjectBtn', 'click',function(){
            var id = $(this).data('id');
            $('#page-wrapper').load("{{url('project/edit')}}", {'id':id});
        });

    });
</script>

{{include_file name='public/footer'}}