
    <div class="row">
        <div class="col-lg-12">
            <div class="page-header">
                <h1>接口管理 {{if \app\user::is_creater()}}<small>支持Ctrl+E键快速编辑</small>{{/if}}</h1>
                <div class="opt-btn">
                    <a href="javascript:void(0);" class="btn btn-sm btn-success js_editApiBtn" data-id="{{$api.id}}">编辑</a>
                    <a href="javascript:void(0);" class="btn btn-sm btn-danger js_deleteApiBtn" data-id="{{$api.id}}">删除</a>

                </div>
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    接口详情
                </div>
                <div class="panel-body">
                    <p class="text-muted"><label>接口名称：</label>{{$api.title}}</p>
                    <p class="text-muted"><label>所属模块：</label>{{$api.module.title}}</p>
                    <p class="text-muted"><label>请求类型：</label>{{\app\api::get_method_list($api.method)}}</p>
                    <p class="text-muted"><label>接口描述：</label>{{$api.intro}}</p>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    接口地址
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">

                            <tbody>
                            {{foreach $envs as $env}}
                            <tr>
                                <td style="width: 20%;">{{$env.title}}({{$env.name}})</td>
                                <td style="width: 70%;">{{$env.domain}}/{{$api.uri}}</td>
                                <td style="width: 10%;">
                                    <button type="button" class="btn btn-xs btn-success">复制链接</button>
                                </td>
                            </tr>
                            {{/foreach}}
                            <tr>
                                <td>mock地址</td>
                                <td>{{url("mock/{{$api.decode_id}}", '', true)}}</td>
                                <td>
                                    <button type="button" class="btn btn-xs btn-success">复制链接</button>
                                </td>
                            </tr>

                            </tbody>
                        </table>

                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-6 -->
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    请求参数
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr class="success">
                                <th>字段别名</th>
                                <th>字段含义</th>
                                <th>字段类型</th>
                                <th>是否必填</th>
                                <th>默认值</th>
                                <th>备注说明</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{foreach $request_fields as $request_field}}
                            <tr class="{{$request_field.class}}">
                                <td>{{$request_field.delimiter}}{{if $request_field.parent_id}}--{{/if}}{{$request_field.name}}</td>
                                <td>{{$request_field.title}}</td>
                                <td>{{\app\field::get_type_list({{$request_field.type}})}}</td>
                                <td>{{if $request_field.is_required}}是{{else}}否{{/if}}</td>
                                <td>{{$request_field.default_value}}</td>
                                <td>{{$request_field.intro}}</td>
                            </tr>
                            {{/foreach}}

                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-6 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    返回参数
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover">
                            <thead>
                            <tr class="success">
                                <th>字段别名</th>
                                <th>字段含义</th>
                                <th>字段类型</th>
                                <th>备注说明</th>
                            </tr>
                            </thead>
                            <tbody>
                            {{foreach $response_fields as $response_field}}
                            <tr class="{{if $response_field.level == 1}}warning{{/if}}">
                                <td style="text-align: left;padding-left: 50px;">{{$response_field.delimiter}}{{if $response_field.parent_id}}└{{/if}}{{$response_field.name}}</td>
                                <td>{{$response_field.title}}</td>
                                <td>{{\app\field::get_type_list({{$response_field.type}})}}</td>
                                <td>{{$response_field.intro}}</td>
                            </tr>

                            {{/foreach}}
                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-6 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    返回示例<a href="javascript:void(0);" style="margin-left: 10px;" data-toggle="tooltip" title="重新生成"><i class="fa fa-refresh"></i></a>
                </div>
                <div class="panel-body">
                    <div class="hidden" id="RawJson">{{$api.demo}}</div>
                    <div id="Canvas" class="Canvas"></div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>

    <script>
        $(function () {
            Process();
        });
    </script>
